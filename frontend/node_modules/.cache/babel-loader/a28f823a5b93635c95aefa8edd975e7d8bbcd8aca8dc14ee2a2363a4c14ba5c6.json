{"ast":null,"code":"import{useState}from\"react\";import{motion}from\"framer-motion\";import{checkGift,useGift}from\"../api\";import\"./CheckGiftPage.css\";// ‚¨áÔ∏è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";async function downloadFile(url){const res=await fetch(url);const blob=await res.blob();const link=document.createElement(\"a\");link.href=window.URL.createObjectURL(blob);link.download=\"gift.png\";document.body.appendChild(link);link.click();document.body.removeChild(link);}export default function CheckGiftPage(){const[code,setCode]=useState(\"\");const[gift,setGift]=useState(null);const[message,setMessage]=useState(\"\");const[checking,setChecking]=useState(false);const[opening,setOpening]=useState(false);// ‚úÖ –ü–†–û–í–ï–†–ö–ê –ö–û–î–ê ‚Äî –¢–û–õ–¨–ö–û –û–î–ò–ù –†–ê–ó\nasync function handleCheck(){if(!code||checking)return;setChecking(true);setMessage(\"\");setGift(null);try{const result=await checkGift(code.trim().toUpperCase());if(result.ok&&result.gift){setGift(result.gift);setMessage(\"üéâ –ö–æ–¥ –≤–µ—Ä–Ω—ã–π! –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–æ–¥–∞—Ä–æ–∫ üéÅ\");}else{setMessage(\"‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥\");}}catch(_unused){setMessage(\"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏\");}finally{setChecking(false);}}// ‚úÖ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –ö–û–î–ê ‚Äî –°–¢–†–û–ì–û –ü–û–°–õ–ï –°–ö–ê–ß–ò–í–ê–ù–ò–Ø\nasync function handleOpenGift(){if(!gift||opening)return;setOpening(true);await downloadFile(gift.file_url);await useGift(gift.code);}return/*#__PURE__*/_jsxs(\"div\",{className:\"check-page\",children:[/*#__PURE__*/_jsx(motion.div,{className:\"gift \".concat(gift?\"active\":\"\"),onClick:handleOpenGift,animate:gift?opening?{scale:[1,1.3,0.6],opacity:[1,1,0]}:{scale:[1,1.08,1]}:{},transition:opening?{duration:1}:gift?{duration:1.4,repeat:Infinity}:{},children:\"\\uD83C\\uDF81\"}),!gift&&/*#__PURE__*/_jsxs(\"div\",{className:\"code-box\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0435\\u043A\\u0440\\u0435\\u0442\\u043D\\u044B\\u0439 \\u043A\\u043E\\u0434\",value:code,onChange:e=>setCode(e.target.value.toUpperCase())}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCheck,disabled:checking,children:checking?\"–ü—Ä–æ–≤–µ—Ä–∫–∞...\":\"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"hint\",children:message})]});}","map":{"version":3,"names":["useState","motion","checkGift","useGift","jsx","_jsx","jsxs","_jsxs","downloadFile","url","res","fetch","blob","link","document","createElement","href","window","URL","createObjectURL","download","body","appendChild","click","removeChild","CheckGiftPage","code","setCode","gift","setGift","message","setMessage","checking","setChecking","opening","setOpening","handleCheck","result","trim","toUpperCase","ok","_unused","handleOpenGift","file_url","className","children","div","concat","onClick","animate","scale","opacity","transition","duration","repeat","Infinity","placeholder","value","onChange","e","target","disabled"],"sources":["C:/Users/–ö—Å–µ–Ω–∏—è/Desktop/gift-frontend/frontend/src/pages/CheckGiftPage.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { checkGift, useGift } from \"../api\";\r\nimport \"./CheckGiftPage.css\";\r\n\r\n// ‚¨áÔ∏è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞\r\nasync function downloadFile(url) {\r\n  const res = await fetch(url);\r\n  const blob = await res.blob();\r\n\r\n  const link = document.createElement(\"a\");\r\n  link.href = window.URL.createObjectURL(blob);\r\n  link.download = \"gift.png\";\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n}\r\n\r\nexport default function CheckGiftPage() {\r\n  const [code, setCode] = useState(\"\");\r\n  const [gift, setGift] = useState(null);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [checking, setChecking] = useState(false);\r\n  const [opening, setOpening] = useState(false);\r\n\r\n  // ‚úÖ –ü–†–û–í–ï–†–ö–ê –ö–û–î–ê ‚Äî –¢–û–õ–¨–ö–û –û–î–ò–ù –†–ê–ó\r\n  async function handleCheck() {\r\n    if (!code || checking) return;\r\n\r\n    setChecking(true);\r\n    setMessage(\"\");\r\n    setGift(null);\r\n\r\n    try {\r\n      const result = await checkGift(code.trim().toUpperCase());\r\n\r\n      if (result.ok && result.gift) {\r\n        setGift(result.gift);\r\n        setMessage(\"üéâ –ö–æ–¥ –≤–µ—Ä–Ω—ã–π! –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–æ–¥–∞—Ä–æ–∫ üéÅ\");\r\n      } else {\r\n        setMessage(\"‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥\");\r\n      }\r\n    } catch {\r\n      setMessage(\"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏\");\r\n    } finally {\r\n      setChecking(false);\r\n    }\r\n  }\r\n\r\n  // ‚úÖ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –ö–û–î–ê ‚Äî –°–¢–†–û–ì–û –ü–û–°–õ–ï –°–ö–ê–ß–ò–í–ê–ù–ò–Ø\r\n  async function handleOpenGift() {\r\n    if (!gift || opening) return;\r\n\r\n    setOpening(true);\r\n\r\n    await downloadFile(gift.file_url);\r\n    await useGift(gift.code);\r\n  }\r\n\r\n  return (\r\n    <div className=\"check-page\">\r\n      <motion.div\r\n        className={`gift ${gift ? \"active\" : \"\"}`}\r\n        onClick={handleOpenGift}\r\n        animate={\r\n          gift\r\n            ? opening\r\n              ? { scale: [1, 1.3, 0.6], opacity: [1, 1, 0] }\r\n              : { scale: [1, 1.08, 1] }\r\n            : {}\r\n        }\r\n        transition={\r\n          opening\r\n            ? { duration: 1 }\r\n            : gift\r\n            ? { duration: 1.4, repeat: Infinity }\r\n            : {}\r\n        }\r\n      >\r\n        üéÅ\r\n      </motion.div>\r\n\r\n      {!gift && (\r\n        <div className=\"code-box\">\r\n          <input\r\n            placeholder=\"–í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥\"\r\n            value={code}\r\n            onChange={(e) => setCode(e.target.value.toUpperCase())}\r\n          />\r\n          <button onClick={handleCheck} disabled={checking}>\r\n            {checking ? \"–ü—Ä–æ–≤–µ—Ä–∫–∞...\" : \"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥\"}\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {message && <div className=\"hint\">{message}</div>}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}